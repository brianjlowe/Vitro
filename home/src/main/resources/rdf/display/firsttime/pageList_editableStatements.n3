# baseURI: http://vitro.mannlib.cornell.edu/ns/vitro/pageList_editableStatements

@prefix : <http://vitro.mannlib.cornell.edu/ns/vitro/pageList_editableStatements#> .
@prefix action: <java:edu.cornell.mannlib.vitro.webapp.auth.permissions.SimplePermission#> .
@prefix display: <http://vitro.mannlib.cornell.edu/ontologies/display/1.1#> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

display:pageListData
  a <java:edu.cornell.mannlib.vitro.webapp.utils.dataGetter.SparqlQueryDataGetter> ;
  display:query """
    PREFIX display: <http://vitro.mannlib.cornell.edu/ontologies/display/1.1#>
    PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
    SELECT ?listedPageUri ?listedPageTitle ?listedPageUrlMapping ?listedPageTemplate ?listedPageMenuItem ?listedPageCannotDeletePage
    WHERE {
        ?listedPageUri a display:Page .
        OPTIONAL{ ?listedPageUri display:urlMapping ?listedPageUrlMapping. }
        OPTIONAL{ ?listedPageUri display:title  ?listedPageTitle. }
        OPTIONAL {?listedPageUri display:requiresBodyTemplate ?listedPageTemplate .}
        OPTIONAL {?listedPageMenuItem display:toPage ?listedPageUri .}
        OPTIONAL {?listedPageUri display:cannotDeletePage ?listedPageCannotDeletePage .}
     }  ORDER BY ?listedPageTitle """ ;
  display:queryModel <vitro:requestDisplayModel> ;
  display:saveToVar "pages" ;
.
display:pageListPage
  a display:Page ;
  display:hasDataGetter display:pageListData ;
  display:requiresBodyTemplate "pageList.ftl" ;
  display:title "Pages" ;
  display:urlMapping "/pageList" ;
.
